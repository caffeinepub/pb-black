{
  "kind": "build_request",
  "title": "Fix deployment blockers and deploy PB Black app live",
  "priority": "high",
  "requirements": [
    {
      "id": "REQ-51",
      "text": "Fix the Motoko backend compilation/type errors in `backend/main.mo` that can block deployment, including: (1) ensure `PremiumQualification.compareByTimestamp` returns an `Order.Order` and actually compares `timestamp` values; and (2) replace the invalid `allQualifications.sort(...)` usage with a type-correct approach that returns a sorted `[PremiumQualification]` from `getAllQualifications()`.",
      "target": "backend",
      "source": {
        "messageIds": [
          "msg-4"
        ],
        "quotes": [
          "Pls make it live. waiting for it to go live"
        ]
      },
      "acceptanceCriteria": [
        "`backend/main.mo` compiles successfully.",
        "`PremiumQualification.compareByTimestamp` returns an `Order.Order` and is based on `timestamp` ordering (newest-first or oldest-first must be consistent and documented in code comments).",
        "`getAllQualifications()` returns a sorted Motoko array without calling a non-existent `.sort` method on a Motoko array value.",
        "Admin-only authorization checks for `getAllQualifications()` remain intact (unauthorized callers still trap)."
      ]
    },
    {
      "id": "REQ-52",
      "text": "Re-run the standard end-to-end deploy flow so the application is live, ensuring the frontend type bindings remain compatible with the backend Candid interface (regenerate/update frontend declarations if required by the build system).",
      "target": "both",
      "source": {
        "messageIds": [
          "msg-4"
        ],
        "quotes": [
          "Pls make it live. waiting for it to go live"
        ]
      },
      "acceptanceCriteria": [
        "Deployment completes without errors.",
        "Landing page route `/` loads successfully in the deployed environment.",
        "`/admin` route remains functional and still requires Internet Identity + admin authorization to access admin actions.",
        "Frontend builds successfully against the deployed backend interface (no Candid/type mismatches)."
      ]
    }
  ],
  "constraints": [
    "Backend must remain a single Motoko actor in `backend/main.mo` (no additional backend services).",
    "Only create `backend/migration.mo` if a stable-state upgrade is required by changes made in this request (follow the project’s conditional migration policy).",
    "Do not edit files under `frontend/src/components/ui` or other immutable frontend paths listed in SYSTEM_CONTEXT."
  ],
  "nonGoals": [
    "No new landing-page copy/design changes beyond what is required to successfully build and deploy.",
    "No new product features or new routes as part of this ‘go live’ request."
  ],
  "imageRequirements": {
    "required": [],
    "edits": []
  },
  "userProfileUpdate": {
    "goalsToAdd": [],
    "goalsToRemove": [],
    "preferencesToAdd": [],
    "preferencesToRemove": [],
    "miscToAdd": [],
    "miscToRemove": [],
    "fieldsToSet": {},
    "fieldsToDelete": []
  }
}